<!DOCTYPE html>
<html
	 xmlns="http://www.w3.org/1999/xhtml"
	 xmlns:h="http://java.sun.com/jsf/html"
	 xmlns:p="http://primefaces.org/ui"
	 xmlns:ui="http://java.sun.com/jsf/facelets"
	 xmlns:f="http://java.sun.com/jsf/core">
    
     <h:body>


 <ui:composition template="/template/mainLayout.xhtml">
 
  <div id="content" >
   
	 <ui:define  name="content" >
    
      <h:form id="formularioBitacora" style=" font-size:12px;">
      
      
    <div class="ui-g">
    <div class="ui-g-4"><h:outputText value="Domicilios" style="font-size:1.5em;margin-left:0px" onreset="#{bitacorasController.updateTodasBitacorasApp(bitacorasController.appSeleccionada)}"/>  </div>
    <div class="ui-g-1"></div>
    <div class="ui-g-1"></div>
    <div class="ui-g-2"></div>
    <div class="ui-g-4">	<p:button value="Regresar" href="../../menuPerfil.xhtml" icon="ui-icon-arrowthick-1-w"></p:button>
   							 <p:commandButton process="@this" style="margin-left:10px" title="Registrar domicilio"
						  icon="fa fa-plus" value="Registrar domicilio" 
							actionListener="#{externosController.mostrarRegistrarDomicilio}"  />
    </div>
</div>
       		
       				
      
  			
				
      <p:panel id="pnl" header="Domicilios registrados" style="margin-bottom:25px; overflow:auto; font-size:12px;"
      >
      <f:facet name="actions">
       <p:commandLink
            styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default">
            <h:outputText styleClass="ui-icon ui-icon-help" />
        </p:commandLink>
    </f:facet> 
      
       <div class="ui-fluid">
       	<div class="ui-g-12" > 
         <p:dataTable id="listaDirecciones" scrollHeight="300" rowKey="#{sol.id}"
					var="dir" value="#{externosController.obtenerDomicilios(loginController.usuarioLogeado.externo)}"
					paginator="true" rows="10"
					emptyMessage="No hay solicitudes de alta registradas"
					paginatorPosition="bottom" style="text-align:center"
					scrollable="true" sortOrder="descending">



					<f:facet name="header">

					</f:facet>


					<p:column headerText="# ID" filterMatchMode="contains" width="65"
						filterStyle="display:none">  
           		 #{dir.idDomicilio}  
        	</p:column>


						<p:column headerText="Dirección" filterMatchMode="contains"
							filterStyle="display:none">
           		 #{dir.calle} #{dir.numExt} #{dir.numInt}, #{catalogosController.getColonia(dir.codColonia,dir.codEstado,dir.codMunicipio).id.DAsenta},
           		 CP #{catalogosController.getUnicoCP(dir.codEstado,dir.codMunicipio,dir.codColonia).id.DCp},
           		 #{catalogosController.getMunicipio(dir.codMunicipio,dir.codEstado).id.DMnpio},
           		 #{catalogosController.getEstado(dir.codEstado).id.DEstado}, México.
        	</p:column>
        	
        	<p:column headerText="Tipo" filterMatchMode="contains"
							filterStyle="display:none" width="65">  
           		 <p:outputLabel rendered="#{dir.fiscal}" value="Fiscal"></p:outputLabel>
           		 <p:outputLabel rendered="#{dir.entrega}" value="Entrega"></p:outputLabel>
           		 <p:outputLabel rendered="#{dir.secundaria}" value="Secundario"></p:outputLabel>
        	</p:column>
				

					<p:column headerText="Acción" width="70" filterMatchMode="contains"
						filterStyle="display:none">
						<p:commandButton process="listaDirecciones" title="Eliminar"
							update="listaDirecciones" icon="fa fa-trash" style="width:30px;margin-right:5px;"
							actionListener="#{externosController.eliminarDomicilio(dir)}" />

							<p:commandButton process="listaDirecciones" style="width:30px;" title="Editar"
							update="listaDirecciones" icon="fa fa-pencil"
							actionListener="#{externosController.cargarDatosDomicilio(dir)}"  />
						

					</p:column>


					<f:facet name="footer">

					</f:facet>
				</p:dataTable>
       
       
            </div>
        
 </div>  
 </p:panel>
 
            </h:form>
            
          
            
           
               
      <!--       <p:blockUI block="pnl" trigger="saveBtn" >
                 LOADING<br />  
        <p:graphicImage value="/resources/images/utiles/ajax-loader.gif"/>  
      </p:blockUI>   --> 


        </ui:define>
        
        
        
  </div>
  
		
</ui:composition>
 </h:body>
</html>